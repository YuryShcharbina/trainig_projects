<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>Test LEMP stack from Docker</title>
    </head>
    <body>
        <h2>Test LEMP stack</h2>
        <p>This is the page from {{ ansible_nodename }} host</p>
        <?php
        $connection = new PDO('mysql:host=mysql;dbname=test;charset=utf8', 'root', 'Qw123456');
        $query      = $connection->query("SELECT TABLE_NAME FROM information_schema.TABLES WHERE TABLE_SCHEMA = 'test'");
        $tables     = $query->fetchAll(PDO::FETCH_COLUMN);

        if (empty($tables)) {
           echo '<p class="center">There are no tables in database <code>test</code>.</p>';
        } else {
           echo '<p class="center">Database <code>demo</code> contains the following tables:</p>';
           echo '<ul class="center">';
           foreach ($tables as $table) {
              echo "<li>{$table}</li>";
           }
           echo '</ul>';
        }
        ?>
    </body>
</html>
